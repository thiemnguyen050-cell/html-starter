<script>
function convertLink() {
  const rawLink = document.getElementById("inputLink").value.trim();
  const resultEl = document.getElementById("result");

  if (!rawLink) {
    alert("Vui l√≤ng nh·∫≠p link Shopee g·ªëc");
    return;
  }

  // Ch·∫∑n link affiliate
  if (rawLink.includes("affiliate_id") || rawLink.includes("utm_")) {
    alert("Ch·ªâ d√°n link Shopee G·ªêC (vn.shp.ee ho·∫∑c shopee.vn)");
    return;
  }

  const affiliateId = "17365830436";
  const encodedLink = encodeURIComponent(rawLink);

  const affiliateLink =
    "https://shope.ee/redirect?affiliate_id=" +
    affiliateId +
    "&url=" +
    encodedLink;

  resultEl.innerHTML = `
    <b>Link affiliate Shopee (chu·∫©n):</b><br>
    <a href="${affiliateLink}" target="_blank">${affiliateLink}</a>
    <br><br>
    <button onclick="copyLink('${affiliateLink}')">üìã Copy link</button>
  `;
}

function copyLink(text) {
  navigator.clipboard.writeText(text);
  alert("ƒê√£ copy link!");
}
</script>
